<!DOCTYPE html>
<html lang="en">
	<head>
		<title>three.js webgl - STL</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				font-family: Monospace;
				background-color: #000000;
				margin: 0px;
				overflow: hidden;
			}

			span {
				display: inline-block;
				width: 60px;
				float: left;
				text-align: center;
			}

		</style>
	</head>
	<body>

		<script src="js/lib/three.min.js" type="text/javascript"></script>
		<script src="js/lib/zip/zip.js"></script>
		<script src="js/lib/OrbitControls.js" type="text/javascript"></script>
		<script src="js/lib/STLLoader.js" type="text/javascript"></script>
		<script src="js/lib/Detector.js" type="text/javascript"></script>
        <script src="js/lib/underscore-min.js" type="text/javascript"></script>
		<script src="js/src/setup.js" type="text/javascript"></script>
		<script src="js/src/handLoader.js" type="text/javascript"></script>
		<script src="js/src/handZipper.js" type="text/javascript"></script>

		<script>

			// Specify a hand:
			var specs = {
				hand: "RR",
				size: 100
			};

			// Display some STLs
			HandLoader.loadHand(specs.hand,specs.size,function(arrayBuffers){
				// Download those STLs in a zip file

				// THREE.js sets the XHR "responseType" to "arraybuffer" (see STLLoader.js)
				// To put these files in a zip archive we need blobs.
				// Fortunately, support for 'new Blob()' is quite strong
				// See http://caniuse.com/#search=Blob
				var files = [{
					name: "Palm_" + specs.hand + "_" + specs.size + ".stl",
					blob: new Blob([arrayBuffers.palm], {type: "application/sla"})
				},{
					name: "Distal_" + specs.hand + "_" + specs.size + ".stl",
					blob: new Blob([arrayBuffers.distal], {type: "application/sla"})
				},{
					name: "Proximal_" + specs.hand + "_" + specs.size + ".stl",
					blob: new Blob([arrayBuffers.proximal], {type: "application/sla"})
				}];


				var zipFileName = "HandForge_" + specs.hand + "_" + specs.size + ".zip";
				HandZipper.zip(zipFileName,files);

				// Defined in setup.js
				render();

			});

		</script>
	</body>
</html>
